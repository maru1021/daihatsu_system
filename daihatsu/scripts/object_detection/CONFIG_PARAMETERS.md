# 動体検出システム設定パラメータ説明

## camera (カメラ設定)
- **width**: カメラ映像の横幅（ピクセル）
- **height**: カメラ映像の縦幅（ピクセル）
- **camera_id_range**: カメラID検索範囲（0～指定値-1までテスト）

## detection (検出設定)

### motion (動体検出)
- **history**: 背景学習フレーム数（少ないほど変化に敏感、推奨値: 200-500）
- **var_threshold**: 動体検出の分散閾値（低いほど敏感、推奨値: 10-50）
- **detect_shadows**: 影検出の有効/無効（trueだと影も動体として検出）
- **min_area**: 動体検出の最小面積（ピクセル、小さいほど敏感、推奨値: 100-1000）
- **morph_kernel_size**: ノイズ除去カーネルサイズ（大きいほどノイズ除去強化、推奨値: [3,3]-[7,7]）
- **aspect_ratio_range**: 検出物体のアスペクト比範囲（縦横比フィルタ、推奨値: [0.1, 10.0]）
- **extent_threshold**: 物体の充填率閾値（断片的な検出を除去、推奨値: 0.1-0.5）

## alert (アラート設定)

### zone (監視エリア)
- **type**: アラートエリアの形状（現在は"rectangle"のみ対応）
- **x_ratio**: 画面幅に対するエリア幅の比率（0.0-1.0）
- **y_ratio**: 画面高に対するエリア高の比率（0.0-1.0）
- **position**: エリア位置（現在は"top_left"のみ対応）

### target_objects
アラーム対象の物体タイプ配列。動体検出システムでは:
- **motion**: 動体検出（動くものすべて）

### alarm (アラーム)
- **enabled**: アラーム機能の有効/無効
- **sound_message**: 音声アラームのメッセージ（Macのsayコマンド用）
- **console_message**: コンソール出力メッセージ（{count}で検出数を表示）
- **auto_screenshot**: 検知時の自動スクリーンショット有効/無効
- **screenshot_path**: スクリーンショット保存フォルダ（相対パスまたは絶対パス）

## display (表示設定)

- **window_name**: OpenCVウィンドウのタイトル

### colors (色設定)
境界ボックス色をBGR形式（青緑赤）で指定（0-255）:
- **motion**: 動体検出色（デフォルト: 緑 [0, 255, 0]）
- **default**: 未定義物体の色（デフォルト: グレー [128, 128, 128]）

- **alert_zone_color**: アラートエリア枠の色（BGR形式、デフォルト: 赤 [0, 0, 255]）

### font (フォント設定)
- **face**: 文字フォント種類（OpenCVフォント定数）
- **scale**: 文字サイズ倍率（推奨値: 0.4-1.0）
- **thickness**: 文字線の太さ（推奨値: 1-3）

## パラメータ調整ガイド

### 検出感度を上げたい場合（小さな動きも検出）
- **var_threshold**: 10-15に下げる
- **min_area**: 100-200に下げる
- **history**: 200-300に下げる

### 誤検出を減らしたい場合（確実な動きのみ検出）
- **var_threshold**: 30-50に上げる
- **min_area**: 500-1000に上げる
- **history**: 400-500に上げる

### ノイズが多い環境
- **morph_kernel_size**: [5,5] または [7,7] に上げる
- **extent_threshold**: 0.3-0.5に上げる
- **detect_shadows**: falseに設定

### アラートエリアサイズ調整
- **小さなエリア**: x_ratio, y_ratio = 0.1-0.3
- **中程度エリア**: x_ratio, y_ratio = 0.3-0.6
- **大きなエリア**: x_ratio, y_ratio = 0.6-0.8
- **全画面監視**: x_ratio, y_ratio = 1.0

## 環境別推奨設定

### 室内環境（安定した照明）
```json
{
  "history": 400,
  "var_threshold": 25,
  "min_area": 500
}
```

### 屋外環境（照明変化あり）
```json
{
  "history": 300,
  "var_threshold": 15,
  "min_area": 300
}
```

### 高感度設定（小さな動きも検出）
```json
{
  "history": 200,
  "var_threshold": 10,
  "min_area": 100
}
```
